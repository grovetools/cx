{
  "core_concepts": [
    {
      "name": "Pattern language",
      "description": "The rules file uses a `.gitignore`-style, line-oriented syntax:\n\n- Comments and whitespace:\n  - Lines starting with `#` are comments\n  - Empty lines are ignored\n\n- Inclusion patterns:\n  - Basic glob: `*.go`\n  - Recursive glob: `**/*.go` (matches at any depth)\n  - Plain directory on an inclusion line is treated as recursive:\n    - Example: `docs` is interpreted as `docs/**` (for inclusion only)\n\n- Exclusions:\n  - Prefix with `!` to exclude\n  - Example: `!vendor/**/*` excludes all files under `vendor/`\n  - Example: `!*_test.go` excludes Go test files\n\n- Relative and absolute paths:\n  - Relative patterns are resolved from the project root (the directory where `.grove/rules` lives)\n  - Parent-relative patterns are allowed (e.g., `../sibling/**/*.go`)\n  - Absolute paths are allowed and match directly on the filesystem\n\n- Directory name matches (gitignore-like behavior):\n  - A pattern without a slash can match a directory name anywhere in the path\n  - Example: `!tests` excludes any directory named “tests” and its contents\n\n- Git-ignored files:\n  - By default, files ignored by Git are not included in the resolved context\n  - `cx view` can optionally display git-ignored files for inspection\n\nExamples:",
      "example": "# Include all Go files recursively\n**/*.go\n\n# Include top-level Markdown files\n*.md\n\n# Exclude vendor and any tests directory tree\n!vendor/**/*\n!**/tests/**\n\n# Exclude file pattern across the tree\n!*_test.go\n\n# Include a local subdirectory (treated as docs/**)\ndocs\n\n# Include files from a sibling project\n../sibling-lib/**/*.go\n\n# Include a specific absolute directory or file\n/Users/alex/shared/configs\n/Users/alex/shared/configs/app.yaml"
    },
    {
      "name": "Pattern resolution and “last match wins”",
      "description": "For a given path, the last matching rule on that path determines inclusion or exclusion. This is consistent with common ignore-file semantics and is applied while walking the filesystem. Practically, put broad includes first and follow with specific exclusions.\n\nExample ordering:",
      "example": "**/*.go         # include all Go\n!**/*_test.go   # then exclude test files\n!**/internal/** # and exclude internal"
    },
    {
      "name": "Hot-over-cold precedence (and the cold override)",
      "description": "cx resolves hot patterns and cold patterns separately, then enforces cold-over-hot precedence:\n\n- If a path appears in both hot and cold results, it is removed from hot and remains in cold\n- This ensures a file belongs to exactly one set in the final outputs\n\nConcrete example:\nResults:\n- Hot: all Go files except `src/utils.go`, plus `README.md`\n- Cold: `src/utils.go` only\n- `.grove/context` will not contain `src/utils.go`; it will appear in `.grove/cached-context` instead",
      "example": "# Hot\n**/*.go\nREADME.md\n---\n# Cold\nsrc/utils.go"
    },
    {
      "name": "Practical tips for writing rules",
      "description": "- Start broad, then narrow:\n  - Include wide patterns (`**/*.go`, `*.md`)\n  - Add exclusions (`!*_test.go`, `!vendor/**/*`, `!**/tests/**`)\n- Use the cold section for stable or large files that don’t change often\n- Prefer relative paths for portability; use absolute paths when necessary\n- When including directories by name, remember a bare directory on an inclusion line is treated as recursive (e.g., `docs` → `docs/**`)\n- Keep rules readable with comments and spacing\n\n--- \n\nBy structuring `.grove/rules` carefully and understanding how cx resolves patterns into hot and cold sets, you can produce predictable, maintainable contexts for downstream tools.",
      "example": ""
    }
  ],
  "best_practices": [
    {
      "title": "1) Organize Rules for Clarity and Predictability",
      "text": "- Start broad, then refine:\n  - Put broad inclusion patterns first, followed by specific exclusions.\n  - Keep hot rules above the `---` separator and cold rules below it.\n- Prefer directory-scoped patterns over many single-file lines:\n  - Use recursive globs (`**`) to include entire directories where appropriate.\n  - Avoid over-broad upward traversals (`../../**`); they can unintentionally include large trees.\n- Make exclusions explicit and close to related includes:\n  - Common exclusions: tests, build outputs, vendored or large data.\n- Keep external references intentional:\n  - When including files outside your project root, prefer short relative paths (a small number of `../`) or absolute paths you control.\n  - Reuse defaults from related projects with `@default: \u003cpath\u003e` to avoid duplication and keep consistency.\n- Remember precedence: cold rules override hot rules for the same path.\n\nExample structure:\n\nUsing project defaults to avoid duplication:\n\n# Hot context: broad includes first\n**/*.go\n*.md\n!**/*_test.go\n!**/vendor/**\n!**/dist/**\n\n---\n# Cold (cached) context: stable or infrequently changing files\ndocs/**/*.md\nschema/**/*.json\n../shared-lib/**/*.go\n!../shared-lib/**/internal/**\n\n# Hot context plus rules from grove-core\n@default: ../grove-core\n\n---\n# Cold context plus rules from grove-flow\n@default: ../grove-flow"
    },
    {
      "title": "2) Manage Context Size Proactively",
      "text": "- Inspect regularly:\n  - `cx stats` gives a breakdown of file counts, estimated tokens, largest files, and language distribution.\n  - Use `--top N` to see heavy hitters quickly, e.g. `cx stats --top 10`.\n  - Note: token counts are estimates based on file size; useful for relative comparisons.\n- Monitor in real time during active work:\n  - `cx dashboard` shows hot and cold summary stats and auto-refreshes when files change.\n  - For non-interactive environments, `cx dashboard --plain` prints a compact text view.\n- Keep large assets and generated data out of hot context:\n  - Exclude logs, media, build artifacts, vendor directories, and large JSON/data files unless necessary.\n- Use cold context for stable background material:\n  - The cold file list is available via `cx list-cache`.\n- When a file is too large but necessary, look for smaller subsets (e.g., a focused subdirectory, or an interface file) to reduce tokens."
    },
    {
      "title": "3) Use Hot vs. Cold Context Intentionally",
      "text": "- Hot (above `---`):\n  - Files you actively read or modify during the task at hand.\n  - Entry points, key modules, API surfaces, task-specific docs.\n- Cold (below `---`):\n  - Stable dependencies, schemas, reference documentation, or libraries that provide background.\n  - Materials you want available once but not repeatedly included in every request.\n- Precedence rule:\n  - If a file matches both hot and cold, it is treated as cold. Place rules accordingly.\n- Helpful commands:\n  - `cx list` shows the effective hot context.\n  - `cx list-cache` lists cold files.\n  - `cx view` helps visualize and adjust hot/cold/excluded items interactively."
    },
    {
      "title": "4) Iterate with the Interactive View",
      "text": "- Use `cx view` to:\n  - See exactly what’s included, excluded, or omitted.\n  - Toggle hot (`h`), cold (`c`), or exclude (`x`) for selected paths.\n  - Review statistics and rule snippets without leaving the TUI.\n  - Switch to the repository view (Tab) to manage cloned or workspace repositories.\n\nThis is the fastest way to catch unintended matches and refine patterns."
    },
    {
      "title": "5) Snapshot Important Configurations",
      "text": "- Treat rules as code and snapshot when you reach a good configuration:\n  - Save: `cx save \u003cname\u003e --desc \"short purpose or scope\"`\n  - List: `cx list-snapshots --sort date --desc`\n  - Diff: `cx diff \u003cname\u003e` to see what changed since a snapshot\n  - Restore: `cx load \u003cname\u003e`\n- Practical uses:\n  - Maintain separate snapshots for feature branches, bug investigations, or release prep.\n  - Keep short descriptions (`--desc`) to make future decisions faster."
    },
    {
      "title": "6) Keep Git-Focused Workflows Tight",
      "text": "- When context is task-specific, start from Git activity:\n  - `cx from-git --staged` to include staged files only.\n  - `cx from-git --commits N` for recent changes.\n  - `cx from-git --branch main..HEAD` for branch diffs.\n  - `cx from-git --since \"2 days ago\"` for temporal ranges.\n- These commands produce explicit paths in `.grove/rules`, which is a good starting point to refine with patterns later."
    },
    {
      "title": "7) Version Control Recommendations",
      "text": "- Ignore locally generated files:\n  - Add `.grove/` to your `.gitignore` to avoid committing generated context files and transient state.\n- Consider committing important snapshots:\n  - If you want certain snapshots shared, allowlist that subdirectory while ignoring the rest of `.grove/`.\n  - Example `.gitignore` configuration:\n    ```gitignore\n    # Ignore all of .grove by default\n    .grove/\n\n    # Allowlist only snapshots (optional)\n    !.grove/context-snapshots/\n    !.grove/context-snapshots/*.rules\n    !.grove/context-snapshots/*.rules.desc\n    ```\n  - This keeps your working artifacts out of the repo while preserving named rule sets your team relies on."
    },
    {
      "title": "8) Practical Patterns to Consider",
      "text": "- Typical Go project:\n  ```txt\n  **/*.go\n  !**/*_test.go\n  !**/vendor/**\n  README.md\n\n  ---\n  docs/**/*.md\n  schema/**/*.json\n  ```\n- Mixed code and docs with external dependencies:\n  ```txt\n  # Hot\n  src/**/*.go\n  pkg/**/*.go\n  README.md\n  CHANGELOG.md\n  !**/*_test.go\n\n  ---\n  # Cold\n  ../shared-lib/**/*.go\n  docs/**/*.md\n  api/**/openapi*.yaml\n  ```\n- Excluding binaries and builds:\n  ```txt\n  **/*\n  !**/*.exe\n  !**/*.dll\n  !**/*.so\n  !**/dist/**\n  !**/build/**\n  !**/node_modules/**\n  ```"
    },
    {
      "title": "9) External Repositories (Optional)",
      "text": "- You can reference Git URLs directly in rules, optionally pinning versions:\n  ```txt\n  # Include a specific release of a dependency\n  https://github.com/org/repo@v1.2.3\n\n  # Exclude test data within that repo\n  !**/testdata/**\n  !**/*_test.go\n  ```\n- Manage them with:\n  - `cx repo list` to review tracked repos, versions, and audit status.\n  - `cx repo sync` to refresh.\n  - `cx repo audit \u003curl\u003e` for an interactive audit workflow.\n- Prefer pinned versions for reproducibility."
    },
    {
      "title": "10) Troubleshooting and Guardrails",
      "text": "- If rules seem to include too much:\n  - Inspect with `cx view`, then refine patterns and exclusions.\n  - Check cold overrides: a file appearing in cold may have been matched in both sections.\n- If token usage climbs:\n  - Run `cx stats --top 10` to identify the largest files by tokens.\n  - Move stable, heavy files to cold or exclude them if not required.\n- If external paths behave unexpectedly:\n  - Prefer explicit absolute paths or a small number of `../`.\n  - Validate resolution from the project root with `cx view` and `cx list`.\n\n---\n\nAdopting these practices keeps your contexts targeted, reproducible, and efficient. Start with broad, clear rules, validate with `cx view`, monitor with `cx stats` (and `cx dashboard` when useful), and snapshot meaningful configurations as you refine them."
    }
  ]
}